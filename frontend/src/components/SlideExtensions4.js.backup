import { motion } from 'framer-motion';
import { Clock, DollarSign, CheckCircle, FileText, AlertCircle, Shield, HelpCircle, Phone, Mail, MapPin, Handshake, Calendar, TrendingUp } from 'lucide-react';

// Parte 4: Slides Finais - Fases, Riscos, Decis√£o e Encerramento
export const renderFinalSlides = (slide, textSize, getTextSize, fadeIn) => {

  // SLIDE: PHASES-1
  if (slide.type === 'phases-1') {
    return (
      <div className="h-full flex flex-col bg-black">
        <motion.h2 {...fadeIn} className="text-6xl font-bold text-white pt-12 pb-8 text-center">
          {slide.title}
        </motion.h2>

        <div className="flex-1 overflow-y-auto scrollbar-hide px-12 pb-12">
          <div className="max-w-5xl mx-auto space-y-8">
          {slide.fases.map((fase, i) => (
            <motion.div
              key={i}
              initial={{ opacity: 0, x: -30 }}
              animate={{ opacity: 1, x: 0 }}
              transition={{ delay: 0.2 + i * 0.15 }}
              className="bg-gradient-to-r from-red-900/30 to-transparent border-l-4 border-red-500 rounded-r-xl p-6"
            >
              <div className="flex items-start justify-between mb-4">
                <h3 className="text-3xl font-bold text-red-400">FASE {fase.numero}: {fase.nome}</h3>
                <div className="text-right space-y-2">
                  <div className="flex items-center justify-end gap-2">
                    <Clock className="w-4 h-4 text-gray-400" />
                    <p className={`${getTextSize('base')} text-gray-400`}>{fase.tempo}</p>
                  </div>
                  <div className="flex items-center justify-end gap-2">
                    <DollarSign className="w-6 h-6 text-white" />
                    <p className="text-2xl font-bold text-white">{fase.custo}</p>
                  </div>
                </div>
              </div>
              <div className={`${getTextSize('lg')} text-gray-300 space-y-2`}>
                <div className="flex items-start gap-2">
                  <FileText className="w-5 h-5 mt-1 flex-shrink-0" />
                  <p>{fase.descricao}</p>
                </div>
                <div className="flex items-start gap-2">
                  <DollarSign className="w-5 h-5 mt-1 flex-shrink-0 text-blue-400" />
                  <p className="text-blue-400">{fase.deposito}</p>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle className="w-5 h-5 mt-1 flex-shrink-0 text-green-400" />
                  <p className="text-green-400">Checkpoint: {fase.checkpoint}</p>
                </div>
              </div>
            </motion.div>
          ))}
        </div>
      </div>
    );
  }

  // SLIDE: PHASES-2
  if (slide.type === 'phases-2') {
    return (
      <div className="h-full flex flex-col bg-black">
        <motion.h2 {...fadeIn} className="text-6xl font-bold text-white pt-12 pb-8 text-center">
          {slide.title}
        </motion.h2>

        <div className="flex-1 overflow-y-auto scrollbar-hide px-12 pb-12">
          <div className="max-w-5xl mx-auto space-y-8">
          {/* Fases */}
          {slide.fases.map((fase, i) => (
            <motion.div
              key={i}
              initial={{ opacity: 0, x: -30 }}
              animate={{ opacity: 1, x: 0 }}
              transition={{ delay: 0.2 + i * 0.15 }}
              className={`${
                fase.lucro
                  ? 'bg-gradient-to-r from-green-900 to-green-800 border-2 border-green-500'
                  : 'bg-gradient-to-r from-red-900/30 to-transparent border-l-4 border-red-500'
              } rounded-xl p-6`}
            >
              <div className="flex items-start justify-between mb-4">
                <h3 className="text-3xl font-bold text-white">FASE {fase.numero}: {fase.nome}</h3>
                <div className="text-right space-y-2">
                  <div className="flex items-center justify-end gap-2">
                    <Clock className="w-4 h-4 text-gray-300" />
                    <p className={`${getTextSize('base')} text-gray-300`}>{fase.tempo}</p>
                  </div>
                  <div className="flex items-center justify-end gap-2">
                    {fase.lucro ? <TrendingUp className="w-6 h-6 text-green-400" /> : <DollarSign className="w-6 h-6 text-white" />}
                    <p className={`text-2xl font-bold ${fase.lucro ? 'text-green-400' : 'text-white'}`}>
                      {fase.custo}
                    </p>
                  </div>
                </div>
              </div>
              <div className={`${getTextSize('lg')} text-gray-300 space-y-2`}>
                <div className="flex items-start gap-2">
                  <FileText className="w-5 h-5 mt-1 flex-shrink-0" />
                  <p>{fase.descricao}</p>
                </div>
                <div className="flex items-start gap-2">
                  <CheckCircle className="w-5 h-5 mt-1 flex-shrink-0 text-green-400" />
                  <p className="text-green-400">Checkpoint: {fase.checkpoint}</p>
                </div>
              </div>
            </motion.div>
          ))}

          {/* Destaque */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.7 }}
            className="bg-yellow-900/30 border-2 border-yellow-500 rounded-xl p-8 text-center"
          >
            <h3 className="text-3xl font-bold text-yellow-400 mb-4">{slide.destaque.title}</h3>
            <p className={`${getTextSize('xl')} text-gray-300 mb-4`}>{slide.destaque.subtitle}</p>
            <p className={`${getTextSize('lg')} text-gray-400 whitespace-pre-line`}>{slide.destaque.extra}</p>
          </motion.div>
        </div>
      </div>
    );
  }

  // SLIDE: RISKS
  if (slide.type === 'risks') {
    const riskIconMap = {
      '‚ö†Ô∏è': AlertCircle,
      'üõ°Ô∏è': Shield,
    };

    return (
      <div className="h-full flex flex-col bg-black">
        <motion.h2 {...fadeIn} className="text-6xl font-bold text-white pt-12 pb-8 text-center">
          {slide.title}
        </motion.h2>

        <div className="flex-1 overflow-y-auto scrollbar-hide px-12 pb-12">
          <div className="max-w-6xl mx-auto space-y-8">
          {/* Tabela de Riscos */}
          <div className="grid grid-cols-2 gap-6">
            {slide.risks.map((item, i) => {
              const RiskIcon = riskIconMap[item.icon] || AlertCircle;
              return (
                <motion.div
                  key={i}
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ delay: 0.2 + i * 0.08 }}
                  className="bg-gray-900 border border-gray-700 rounded-xl p-6"
                >
                  <div className="flex items-start gap-4">
                    <RiskIcon className="w-12 h-12 flex-shrink-0 text-red-400" />
                    <div className="flex-1">
                      <h4 className="text-xl font-bold text-red-400 mb-3">{item.risco}</h4>
                      <p className={`${getTextSize('base')} text-green-400`}>‚Üí {item.protecao}</p>
                    </div>
                  </div>
                </motion.div>
              );
            })}
          </div>

          {/* Footer */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.8 }}
            className="bg-blue-900/30 border-2 border-blue-500 rounded-xl p-8 text-center"
          >
            <div className={`${getTextSize('xl')} text-gray-300 space-y-3`}>
              {slide.footer.map((line, i) => (
                <p key={i}>{line}</p>
              ))}
            </div>
          </motion.div>
        </div>
      </div>
    );
  }

  // SLIDE: DECISION
  if (slide.type === 'decision') {
    return (
      <div className="h-full flex flex-col bg-black">
        <motion.h2 {...fadeIn} className="text-6xl font-bold text-white pt-12 pb-8 text-center">
          {slide.title}
        </motion.h2>

        <div className="flex-1 overflow-y-auto scrollbar-hide px-12 pb-12">
          <div className="max-w-6xl mx-auto space-y-12">
          {/* Colunas */}
          <div className="grid grid-cols-2 gap-12">
            <motion.div
              initial={{ opacity: 0, x: -30 }}
              animate={{ opacity: 1, x: 0 }}
              transition={{ delay: 0.2 }}
              className="bg-gradient-to-br from-green-900/30 to-transparent border-2 border-green-500 rounded-xl p-8"
            >
              <h3 className="text-3xl font-bold text-green-400 mb-8 text-center">{slide.ganha.title}</h3>
              <div className={`${getTextSize('xl')} text-gray-300 space-y-4`}>
                {slide.ganha.items.map((item, i) => (
                  <p key={i}>{item}</p>
                ))}
              </div>
            </motion.div>

            <motion.div
              initial={{ opacity: 0, x: 30 }}
              animate={{ opacity: 1, x: 0 }}
              transition={{ delay: 0.3 }}
              className="bg-gradient-to-br from-blue-900/30 to-transparent border-2 border-blue-500 rounded-xl p-8"
            >
              <h3 className="text-3xl font-bold text-blue-400 mb-8 text-center">{slide.precisa.title}</h3>
              <div className={`${getTextSize('xl')} text-gray-300 space-y-4`}>
                {slide.precisa.items.map((item, i) => (
                  <p key={i}>{item}</p>
                ))}
              </div>
            </motion.div>
          </div>

          {/* Pergunta Central */}
          <motion.div
            initial={{ opacity: 0, scale: 0.9 }}
            animate={{ opacity: 1, scale: 1 }}
            transition={{ delay: 0.5, duration: 0.6 }}
            className="bg-gradient-to-r from-red-900 to-red-700 border-4 border-red-500 rounded-2xl p-12 text-center"
          >
            <h2 className="text-7xl font-black text-white">{slide.question}</h2>
          </motion.div>
        </div>
      </div>
    );
  }

  // SLIDE: NEXT STEPS
  if (slide.type === 'next-steps') {
    const stepIconMap = {
      'üìù': FileText,
      'üí∞': DollarSign,
      'üèóÔ∏è': Calendar,
      'üìä': TrendingUp,
    };

    return (
      <div className="h-full flex flex-col bg-black">
        <motion.h2 {...fadeIn} className="text-6xl font-bold text-white pt-12 pb-8 text-center">
          {slide.title}
        </motion.h2>

        <div className="flex-1 overflow-y-auto scrollbar-hide px-12 pb-12">
          <div className="max-w-6xl mx-auto space-y-8">
          {/* Steps */}
          <div className="grid grid-cols-2 gap-8">
            {slide.steps.map((step, i) => {
              const StepIcon = stepIconMap[step.icon] || FileText;
              return (
                <motion.div
                  key={i}
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ delay: 0.2 + i * 0.1 }}
                  className="bg-gradient-to-br from-gray-900 to-black border border-gray-700 rounded-xl p-6"
                >
                  <div className="flex items-center gap-4 mb-4">
                    <StepIcon className="w-14 h-14 text-red-400" />
                    <h3 className="text-2xl font-bold text-red-400">{step.titulo}</h3>
                  </div>
                  <div className={`${getTextSize('lg')} text-gray-300 space-y-2`}>
                    {step.items.map((item, j) => (
                      <p key={j}>‚Ä¢ {item}</p>
                    ))}
                  </div>
                </motion.div>
              );
            })}
          </div>

          {/* Footer */}
          <motion.div
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.8 }}
            className="bg-amber-900/30 border-2 border-amber-500 rounded-xl p-8 text-center"
          >
            <div className={`${getTextSize('xl')} text-gray-300 space-y-3`}>
              {slide.footer.map((line, i) => (
                <p key={i}>{line}</p>
              ))}
            </div>
          </motion.div>
        </div>
      </div>
    );
  }

  // SLIDE: QUESTIONS (FINAL)
  if (slide.type === 'questions') {
    return (
      <div className="h-full flex flex-col items-center justify-center bg-gradient-to-br from-red-900 via-black to-black p-12">
        {/* Background Effects */}
        <div className="absolute inset-0 opacity-20">
          <div className="absolute top-20 left-20 w-64 h-64 bg-red-500 rounded-full blur-3xl" />
          <div className="absolute bottom-20 right-20 w-96 h-96 bg-amber-500 rounded-full blur-3xl" />
        </div>

        <motion.div
          {...fadeIn}
          className="relative z-10 text-center max-w-4xl"
        >
          <motion.h2
            initial={{ scale: 0.8, opacity: 0 }}
            animate={{ scale: 1, opacity: 1 }}
            transition={{ duration: 0.6, delay: 0.2 }}
            className="text-8xl font-bold text-white mb-8"
          >
            {slide.title}
          </motion.h2>

          <motion.div
            initial={{ y: 30, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            transition={{ duration: 0.6, delay: 0.4 }}
            className="mb-16"
          >
            <h3 className="text-6xl font-black text-red-400 mb-6">{slide.mainText}</h3>
            <p className="text-4xl text-gray-300">{slide.subText}</p>
          </motion.div>

          <motion.div
            initial={{ y: 30, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            transition={{ duration: 0.6, delay: 0.6 }}
            className="bg-gray-900/50 backdrop-blur-sm border border-gray-700 rounded-2xl p-12"
          >
            <h4 className="text-3xl font-bold text-white mb-8">Contato:</h4>
            <div className="space-y-4 text-2xl text-gray-300">
              <div className="flex items-center justify-center gap-3">
                <Phone className="w-6 h-6 text-red-400" />
                <span className="text-white font-semibold">{slide.contact.whatsapp}</span>
              </div>
              <div className="flex items-center justify-center gap-3">
                <Mail className="w-6 h-6 text-red-400" />
                <span className="text-white font-semibold">{slide.contact.email}</span>
              </div>
              <div className="flex items-center justify-center gap-3">
                <MapPin className="w-6 h-6 text-red-400" />
                <span className="text-white font-semibold">{slide.contact.location}</span>
              </div>
            </div>
          </motion.div>

          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            transition={{ delay: 1, duration: 1 }}
            className="mt-16"
          >
            <div className="inline-flex items-center gap-3 bg-gradient-to-r from-red-600 to-red-500 text-white px-12 py-6 rounded-full text-3xl font-bold animate-pulse">
              Obrigado! <Handshake className="w-8 h-8" />
            </div>
          </motion.div>
        </motion.div>
      </div>
    );
  }

  return null;
};
